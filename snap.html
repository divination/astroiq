
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <title>Zodiac</title>
<style>

@import url('/css/style.css') screen;

#snap-pane,
#main {
    position: relative;
    margin: 0 auto;
}
#snap-pane {
    max-height: 92vh;
}

#snap-pane svg {
    
}

</style>


    <script
  src="//code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>


</head>
<body>

<header id="navbar">
    <h1>astroIQ Demo</h1>
    <nav class="horizontal"><ul>
        <li><a href="/">Command Test</a></li>   
        <li><a href="/zodiac">Zodiac Demo</a></li>
        <li><a href="/snap">Snap Demo</a></li>
    </ul></nav>
</header>

<div id="main">

    <object id="snap-pane" class="snap-pane">
        <?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 1440 1440" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="zodiac-svg">
   
</svg>

    </object>


</div>
<script data-source="internal" type="text/javascript" src="/js/snap/dist/snap.svg-min.js"></script>
<script data-source="internal" type="text/javascript">

(function($) {
    $( document ).ready(function() {

        var astroDisc = {
            snap: null,
            radius: 360,
            element: '#zodiac-svg',
            houses: [0,30,60,90,120,150,180,210,240,270,300,330],
            addSegment: function(fillColor,startDeg,endDeg,radius) {
                if (!endDeg) {
                    endDeg = 0;
                }
                if (!startDeg) {
                    startDeg = 0;
                }

                var ps = [this.radius,(0-(this.radius * (5/12))),this.radius,this.radius,((this.radius*2) + (this.radius * (5/12))),this.radius],
                    adj = Math.pow((3/Math.PI),1.125),
                    s1 = Math.abs(ps[1] - ps[3]),
                spanDeg = endDeg - startDeg, frac = spanDeg / 90, sub = s1 * (1-frac) * adj;
                ps[4] -= sub;
                ps[5] -= sub;
                var bigCircle = this.snap.circle(this.radius,this.radius,this.radius).attr({fill:fillColor}),
                    triangle = this.snap.polygon(ps).attr({fill: "white","stroke-width":0}); 

                bigCircle.attr({
                    mask: triangle,
                    transform: 'rotate('+(endDeg-spanDeg) +'deg)'
                });
                
            },

            drawDiscs: function() {
                var th = 1;
                for (var i=0; i < 180;i++) {
                    th = i%5==0? 3 : 1;
                    this.snap.line(this.radius, 0, this.radius, (this.radius*2)).attr({
                        "stroke":"black",
                        "stroke-width": th +"px",
                        "transform-origin": "0 0",
                        transform: "rotate("+i+"deg)"
                    });
                }
                this.snap.circle(this.radius,this.radius,(this.radius * 0.75 )).attr({fill:'#110066'});
            },

            housesToSegments: function() {
                this.houses.push((360-this.houses[0]));
                var cls = ['#ff0000','#999900','#00ff00','#009999','#0000ff','#990099'];
                var index=0,start, end;
                for (d in this.houses) {
                    if (start == null) {
                        start = this.houses[d];
                    } else {
                        end = this.houses[d];
                    }
                    if (end != null && start !=null) {
                         this.addSegment(cls[(index%cls.length)],start,end);
                         start = end;
                         end = null;
                         index++;
                    }
                }
            },

            init: function(radius,houses) {
                this.snap = Snap('#zodiac-svg');
                if (radius) {
                    if (typeof radius == 'number') {
                        this.radius = radius;
                    }
                }
                if (houses) {
                    if (houses instanceof Array) {
                        this.houses = houses;
                    }
                }
                this.housesToSegments();
                this.drawDiscs();
               // var img = this.snap.image('/svgs/signs/devanagari/04_Cancer.svg',360,30,30,30);
            }
        }

        
        
        astroDisc.init(720);

   
    });
})(jQuery);

</script>

</body>
</html>